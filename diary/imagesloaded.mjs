/* esm.sh - esbuild bundle(imagesloaded@5.0.0) es2022 production */
import * as __0$ from "./ev-emitter.mjs";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"ev-emitter":return e(__0$);default:throw new Error("module \""+n+"\" not found");}};
var C=Object.create;var l=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var D=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(i,o)=>(typeof require<"u"?require:i)[o]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var O=(s,i)=>()=>(i||s((i={exports:{}}).exports,i),i.exports),_=(s,i)=>{for(var o in i)l(s,o,{get:i[o],enumerable:!0})},f=(s,i,o,m)=>{if(i&&typeof i=="object"||typeof i=="function")for(let d of B(i))!j.call(s,d)&&d!==o&&l(s,d,{get:()=>i[d],enumerable:!(m=x(i,d))||m.enumerable});return s},g=(s,i,o)=>(f(s,i,"default"),o&&f(o,i,"default")),I=(s,i,o)=>(o=s!=null?C(A(s)):{},f(i||!s||!s.__esModule?l(o,"default",{value:s,enumerable:!0}):o,s));var y=O((v,u)=>{(function(s,i){typeof u=="object"&&u.exports?u.exports=i(s,D("ev-emitter")):s.imagesLoaded=i(s,s.EvEmitter)})(typeof window<"u"?window:v,function(i,o){let m=i.jQuery,d=i.console;function L(e){return Array.isArray(e)?e:typeof e=="object"&&typeof e.length=="number"?[...e]:[e]}function h(e,t,r){if(!(this instanceof h))return new h(e,t,r);let n=e;if(typeof e=="string"&&(n=document.querySelectorAll(e)),!n){d.error(`Bad element for imagesLoaded ${n||e}`);return}this.elements=L(n),this.options={},typeof t=="function"?r=t:Object.assign(this.options,t),r&&this.on("always",r),this.getImages(),m&&(this.jqDeferred=new m.Deferred),setTimeout(this.check.bind(this))}h.prototype=Object.create(o.prototype),h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};let b=[1,9,11];h.prototype.addElementImages=function(e){e.nodeName==="IMG"&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);let{nodeType:t}=e;if(!t||!b.includes(t))return;let r=e.querySelectorAll("img");for(let n of r)this.addImage(n);if(typeof this.options.background=="string"){let n=e.querySelectorAll(this.options.background);for(let q of n)this.addElementBackgroundImages(q)}};let E=/url\((['"])?(.*?)\1\)/gi;h.prototype.addElementBackgroundImages=function(e){let t=getComputedStyle(e);if(!t)return;let r=E.exec(t.backgroundImage);for(;r!==null;){let n=r&&r[2];n&&this.addBackground(n,e),r=E.exec(t.backgroundImage)}},h.prototype.addImage=function(e){let t=new a(e);this.images.push(t)},h.prototype.addBackground=function(e,t){let r=new p(e,t);this.images.push(r)},h.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}let e=(t,r,n)=>{setTimeout(()=>{this.progress(t,r,n)})};this.images.forEach(function(t){t.once("progress",e),t.check()})},h.prototype.progress=function(e,t,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&d&&d.log(`progress: ${r}`,e,t)},h.prototype.complete=function(){let e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){let t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}};function a(e){this.img=e}a.prototype=Object.create(o.prototype),a.prototype.check=function(){if(this.getIsImageComplete()){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src},a.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},a.prototype.confirm=function(e,t){this.isLoaded=e;let{parentNode:r}=this.img,n=r.nodeName==="PICTURE"?r:this.img;this.emitEvent("progress",[this,n,t])},a.prototype.handleEvent=function(e){let t="on"+e.type;this[t]&&this[t](e)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function p(e,t){this.url=e,this.element=t,this.img=new Image}return p.prototype=Object.create(a.prototype),p.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},p.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},p.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},h.makeJQueryPlugin=function(e){e=e||i.jQuery,e&&(m=e,m.fn.imagesLoaded=function(t,r){return new h(this,t,r).jqDeferred.promise(m(this))})},h.makeJQueryPlugin(),h})});var c={};_(c,{default:()=>T});var N=I(y());g(c,I(y()));var{default:k,...S}=N,T=k!==void 0?k:S;export{T as default};
/*! Bundled license information:

imagesloaded/imagesloaded.js:
  (*!
   * imagesLoaded v5.0.0
   * JavaScript is all like "You images are done yet or what?"
   * MIT License
   *)
*/
//# sourceMappingURL=imagesloaded.mjs.map
