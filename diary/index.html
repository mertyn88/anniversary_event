<html>

<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/css/swiper.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/js/swiper.js"></script>

    <style>

    </style>

</head>

<body>



    <div id="image-swiper" class="swiper-container modal">
        <div id="image-wrapper" class="swiper-wrapper">

        </div>
        

        <!-- pagination dots -->
        <div class="swiper-pagination"></div>
    </div>


    <div id="background">
        <p class="shadow-title">지구별에 도착한 해인이 탄생 일기</p>

        <div id="gallery"></div>
    </div>

    <!-- Modal -->
    <div id="image-modal" class="modal">
        <figure class="modal-figure">
            <img class="modal-content" id="modal-image">
            <figcaption id="model-text"></figcaption>
        </figure>
    </div>


    <script src="./js/images.js?v=20240827"></script>
    <script>
        document.getElementById("gallery").innerHTML = galleryData.map(function (data, index) {
            return `
            <figure class="images" style="-webkit-transform: rotate(${Math.floor(Math.random() * (25 - -25 + 1)) + -25}deg);">
                <img id="img_${index}" class="clickable-image" src="${data.photo}" />
                <figcaption id="fig_${index}">${data.caption}</figcaption>
            </figure>
                `;
        }).join("");

        document.getElementById("image-wrapper").innerHTML = galleryData.map(function (data, index) {
            return `
            <figure class="swiper-slide modal-figure" >
                <img class="modal-content" src="${data.photo}" />
                <figcaption>${data.caption}</figcaption>
            </figure>
                `;
        }).join("");


        // Get the modal
        var modal = document.getElementById("image-swiper");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var modalImg = document.getElementById("modal-image");
        var images = document.querySelectorAll(".clickable-image");

        images.forEach(image => {
            image.onclick = function () {
                modal.style.display = "block";
                modalImg.src = this.src;

                // Get text
                target_index = this.id.split("_")[1];
                target_text = document.getElementById("fig_" + target_index).textContent;

                document.getElementById("model-text").textContent = target_text;

            }
        });

        modal.addEventListener('click', function (event) {
            modal.style.display = "none";
        });
        
        // 길이 구하기
        window.onload = function () {
            // 전체 문서의 높이 (스크롤 가능한 모든 영역을 포함한)
            var totalHeight = Math.max(
                document.body.scrollHeight,
                document.documentElement.scrollHeight,
                document.body.offsetHeight,
                document.documentElement.offsetHeight,
                document.body.clientHeight,
                document.documentElement.clientHeight
            );

            // 특정 id를 가진 요소 선택
            var element = document.getElementById("background");

            // 요소의 height를 전체 문서의 height로 변경
            element.style.height = totalHeight + "px";


            var Swipes = new Swiper('.swiper-container', {
                loop: true,
                
                pagination: {
                    el: '.swiper-pagination',
                },
                effect: 'slide', // 페이드 효과
            });
        };
    </script>
</body>

</html>